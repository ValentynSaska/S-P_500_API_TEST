# S&P 500 Data Collector

Цей застосунок автоматично збирає історичні та оновлювані дані OHLC + Volume для компаній індексу S&P 500 через API [Alpha Vantage](https://www.alphavantage.co/), і зберігає їх у PostgreSQL базу даних.

## Чому PostgreSQL?
Обрав PostgreSQL, оскільки це потужна, надійна та перевірена часом реляційна СУБД, яка добре підходить для роботи зі структурованими даними, зокрема часовими рядами (OHLC + volume). Вона підтримує складні SQL-запити, має хорошу продуктивність та активно використовується в продакшн-середовищах.

## Функціонал

- Таймфрейми:
  - **1 день (daily)** — останні 2 роки
  - **1 година (hourly)** — останні 20 днів
  - **5 хвилин (5min)** — останні 2 дні
- Запуск кожного таймфрейму окремо з відповідним інтервалом:
  - `daily` — щодня
  - `hourly` — щогодини
  - `5min` — кожні 5 хвилин
- Дані зберігаються у відповідні таблиці бази даних (`sp500_daily`, `sp500_hourly`, `sp500_minute`)

---

## Встановлення та запуск

### 1. Клонування репозиторію

```
git clone 
cd S&P_500
```
### 2. Встановлення залежностей

```
pip install -r requirements.txt
```

### 3. Налаштування .env файл

```
Видалити префікс [delete_this_prefix]

як має виглядати:

.env[delete_this_prefix] -> .env
```
Ось як має бути заповнення:

```
ALPHA_KEY=ключ_від_AlphaVantage
DB_NAME=назва_бази
DB_USER=користувач
DB_PASSWORD=пароль
DB_HOST=localhost
DB_PORT=5432
```

### 4. Налаштування бази даних


Створити базу PostgreSQL і таблиці, які описані у ddl.sql. Це зробить скрипт автоматично при першому запуску.

Таблиці створюються в схемі sp500. Якщо вона не створилась то в ddl.sql написано вигляд БД

### 5. Запуск скрипт

```
python main.py
```

## Структура проєкту

```
S&P_500/
│
├── main.py           # Основний скрипт
├── ddl.sql           # SQL-файл з DDL інструкціями для створення таблиць
├── .env              # Змінні оточення (додайте вручну)
├── requirements.txt  # Python-залежності
└── README.md         # Інструкція
```
## Примітки

- Обмеження Alpha Vantage: Безкоштовний тариф дозволяє 25 запитів на день(основна причина довгого написання завдання, через необхідність тесту).
- Список символів: У коді зараз — лише 1 компанія (GOOGL) для того щоб за 1 раз всі запити не витратити.


